(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     14585,        361]
NotebookOptionsPosition[     12596,        322]
NotebookOutlinePosition[     12937,        337]
CellTagsIndexPosition[     12894,        334]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"XML", " ", "PARSER"}], " ", "*)"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"$tag", " ", "=", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{"WordCharacter", "|", "\"\<-\>\""}], ")"}], ".."}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"parseAttrs", "[", "expr_String", "]"}], " ", ":=", " ", 
    RowBox[{"Cases", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
       RowBox[{"expr", ",", 
        RowBox[{"{", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"k", ":", "$tag"}], "~~", "\"\<=\\\"\>\"", " ", "~~", " ", 
            RowBox[{"v", ":", 
             RowBox[{"Shortest", "[", "___", "]"}]}], " ", "~~", " ", 
            "\"\<\\\"\>\""}], " ", "\[RuleDelayed]", " ", 
           RowBox[{"{", 
            RowBox[{"k", " ", "\[Rule]", " ", "v"}], "}"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{
            RowBox[{"k", ":", "$tag"}], "~~", "\"\<='\>\"", " ", "~~", " ", 
            RowBox[{"v", ":", 
             RowBox[{"Shortest", "[", "___", "]"}]}], " ", "~~", " ", 
            "\"\<'\>\""}], " ", "\[RuleDelayed]", " ", 
           RowBox[{"{", 
            RowBox[{"k", " ", "\[Rule]", " ", "v"}], "}"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{
            RowBox[{"k", ":", "$tag"}], "~~", "\"\<=\>\"", " ", "~~", " ", 
            RowBox[{"v", ":", "$tag"}]}], " ", "\[RuleDelayed]", " ", 
           RowBox[{"{", 
            RowBox[{"k", " ", "\[Rule]", " ", "v"}], "}"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"k", ":", "$tag"}], " ", "\[RuleDelayed]", " ", 
           RowBox[{"{", 
            RowBox[{"k", " ", "\[Rule]", " ", "\"\<\>\""}], "}"}]}]}], 
         "\[IndentingNewLine]", "}"}]}], "\[IndentingNewLine]", "]"}], ",", 
      "\[IndentingNewLine]", "_Rule", ",", "\[IndentingNewLine]", "All"}], 
     "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"parseXML", "[", "expr_String", "]"}], " ", ":=", " ", 
    RowBox[{"Quiet", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"List", " ", "@@", " ", 
       RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
        RowBox[{"expr", ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"\"\<<\>\"", " ", "~~", " ", 
             RowBox[{"tag", ":", "$tag"}], " ", "~~", " ", 
             RowBox[{"attrs", ":", 
              RowBox[{"Shortest", "[", "___", "]"}]}], " ", "~~", " ", 
             "\"\<>\>\"", " ", "~~", " ", 
             RowBox[{"body", ":", 
              RowBox[{"Shortest", "[", "___", "]"}]}], " ", "~~", " ", 
             "\"\<</\>\"", " ", "~~", " ", 
             RowBox[{"tag", ":", "$tag"}], " ", "~~", " ", "\"\<>\>\""}], " ",
             "\[RuleDelayed]", " ", 
            RowBox[{"XMLElement", "[", 
             RowBox[{"tag", ",", " ", 
              RowBox[{"parseAttrs", " ", "@", " ", "attrs"}], ",", " ", 
              RowBox[{"parseXML", "@", "body"}]}], "]"}]}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"\"\<<\>\"", " ", "~~", " ", 
             RowBox[{"tag", ":", "$tag"}], " ", "~~", " ", 
             RowBox[{"attrs", ":", 
              RowBox[{"Shortest", "[", "___", "]"}]}], " ", "~~", " ", 
             "\"\</>\>\""}], " ", "\[RuleDelayed]", " ", 
            RowBox[{"XMLElement", "[", 
             RowBox[{"tag", ",", " ", 
              RowBox[{"parseAttrs", " ", "@", " ", "attrs"}], ",", " ", 
              RowBox[{"{", "}"}]}], "]"}]}]}], "\[IndentingNewLine]", "}"}]}],
         "\[IndentingNewLine]", "]"}]}], ",", "\[IndentingNewLine]", 
      RowBox[{"StringExpression", "::", "cond"}]}], "\[IndentingNewLine]", 
     "]"}]}], "\[IndentingNewLine]", "Optional", 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.739377665840726*^9, 3.7393778692983723`*^9}, {
  3.739377903824967*^9, 3.739377949480762*^9}, {3.739377979655553*^9, 
  3.739378255141087*^9}, {3.7393782913775597`*^9, 3.739378298267354*^9}, {
  3.739378330750901*^9, 3.739378353005094*^9}, {3.739656679687542*^9, 
  3.7396567085820427`*^9}, {3.7396568549598637`*^9, 3.739656857430938*^9}},
 CellLabel->"In[55]:=",ExpressionUUID->"0959cc30-2488-410c-a688-65b458dcc716"],

Cell[BoxData["Optional"], "Output",
 CellChangeTimes->{3.739809314711583*^9},
 CellLabel->"Out[58]=",ExpressionUUID->"3fa82700-f327-41b1-9550-fcd4f74c35b4"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"xmlToString", "[", "body_String", "]"}], " ", ":=", " ", 
  RowBox[{"StringReplace", "[", "\[IndentingNewLine]", 
   RowBox[{"body", ",", " ", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"\"\<<\>\"", " ", "~~", 
      RowBox[{"Shortest", "[", "___", "]"}], "~~", " ", "\"\<>\>\""}], " ", 
     "\[RuleDelayed]", " ", "\"\<\>\""}]}], "\[IndentingNewLine]", " ", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"xmlToString", "[", "body_List", "]"}], " ", ":=", " ", 
  RowBox[{"StringJoin", " ", "@", " ", 
   RowBox[{"Map", "[", 
    RowBox[{"xmlToString", ",", " ", "body"}], 
    "]"}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"xmlToString", "[", 
    RowBox[{"XMLElement", "[", 
     RowBox[{"_", ",", " ", "_", ",", " ", "body_"}], "]"}], "]"}], " ", ":=",
    " ", 
   RowBox[{"xmlToString", "[", "body", "]"}]}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.739656719193718*^9, 3.739656719504302*^9}, {
  3.73965679238935*^9, 3.739656930355064*^9}},
 CellLabel->"In[46]:=",ExpressionUUID->"88008062-0753-4f8c-99d9-f88a667b0ba9"],

Cell[BoxData[
 RowBox[{
  RowBox[{"import", "[", "url_String", "]"}], ":=", " ", 
  RowBox[{"parseXML", "@", 
   RowBox[{"Import", "[", 
    RowBox[{"url", ",", " ", "\"\<String\>\""}], "]"}]}]}]], "Input",
 CellLabel->"In[59]:=",ExpressionUUID->"a55a1da4-2c9e-4c37-9c7c-474849c5be4a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"xml", " ", "=", " ", 
   RowBox[{
   "import", "[", 
    "\"\<http://www-groups.dcs.st-and.ac.uk/history/Biographies/Regiomontanus.\
html\>\"", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7396567269002743`*^9, 3.739656751754826*^9}},
 CellLabel->"In[60]:=",ExpressionUUID->"1b835b82-8f11-421c-8e98-3c4b8a8bd605"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"article", " ", "=", " ", 
    RowBox[{"Cases", "[", 
     RowBox[{"xml", ",", " ", 
      RowBox[{"XMLElement", "[", 
       RowBox[{"\"\<h3\>\"", ",", " ", "__"}], "]"}], ",", " ", "Infinity"}], 
     "]"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"xmlToString", "[", 
  RowBox[{"htmlToText", "[", "article", "]"}], "]"}]}], "Input",
 CellChangeTimes->{{3.739656765658724*^9, 3.73965677022614*^9}, {
   3.739657062364298*^9, 3.739657067580352*^9}, 3.739657144506077*^9, {
   3.7398090842724657`*^9, 3.739809093395121*^9}},
 CellLabel->"In[61]:=",ExpressionUUID->"dea7b73d-35fb-41f5-996a-9291a48b9f81"],

Cell[BoxData[
 RowBox[{"xmlToString", "[", 
  RowBox[{"htmlToText", "[", 
   RowBox[{"{", 
    RowBox[{"XMLElement", "[", 
     RowBox[{"\<\"h3\"\>", ",", 
      RowBox[{"{", "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"\<\"Born:\"\>", ",", 
        RowBox[{"XMLElement", "[", 
         RowBox[{"\<\"font\"\>", ",", 
          RowBox[{"{", 
           RowBox[{"\<\"color\"\>", "\[Rule]", "\<\"green\"\>"}], "}"}], 
          ",", "\<\" 6 June 1436 in Unfinden (near K&ouml;nigsberg), Lower \
Franconia (now in Bayern, Germany)<br>\"\>"}], "]"}], 
        ",", "\<\"\\r\\nDied:\"\>", ",", 
        RowBox[{"XMLElement", "[", 
         RowBox[{"\<\"font\"\>", ",", 
          RowBox[{"{", 
           RowBox[{"\<\"color\"\>", "\[Rule]", "\<\"purple\"\>"}], "}"}], 
          ",", "\<\" 6 July 1476 in Rome (now Italy)\"\>"}], "]"}]}], "}"}]}],
      "]"}], "}"}], "]"}], "]"}]], "Output",
 CellChangeTimes->{
  3.739657145084338*^9, 3.7397885005038166`*^9, {3.739809314506158*^9, 
   3.739809316506505*^9}},
 CellLabel->"Out[62]=",ExpressionUUID->"fc3ac9b7-952d-4dfb-8c7c-5924ab0d0d6d"]
}, Open  ]],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.739657136007592*^9, 
  3.7396571402673273`*^9}},ExpressionUUID->"995cef4d-35e2-4282-9ed1-\
8d055bf679c5"],

Cell[CellGroupData[{

Cell[BoxData["\"\<h3\>\""], "Input",
 CellChangeTimes->{3.739788504896228*^9},
 CellLabel->"In[33]:=",ExpressionUUID->"e89dff55-58a7-484c-9f01-d1c00dc086bc"],

Cell[BoxData["\<\"h3\"\>"], "Output",
 CellChangeTimes->{3.739788504966483*^9},
 CellLabel->"Out[33]=",ExpressionUUID->"0cf635bd-42aa-4532-bead-f0c5784092a3"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"born", " ", "=", " ", 
   RowBox[{"Cases", "[", 
    RowBox[{"xml", ",", " ", 
     RowBox[{"XMLElement", "[", 
      RowBox[{"\"\<font\>\"", ",", " ", 
       RowBox[{"{", 
        RowBox[{"___", ",", " ", 
         RowBox[{"\"\<color\>\"", "\[Rule]", " ", "\"\<green\>\""}], ",", " ",
          "___"}], "}"}], ",", " ", "_"}], "]"}], ",", " ", "Infinity"}], 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.739657197942247*^9, 3.7396572379260406`*^9}, {
  3.739788486720786*^9, 3.739788512947379*^9}},
 CellLabel->"In[36]:=",ExpressionUUID->"86169c95-2333-440a-bcd8-c60bc0a8336f"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"StringCases", "[", 
  RowBox[{
   RowBox[{"xmlToString", "[", "born", "]"}], ",", 
   RowBox[{"\"\<\>\"", "~~", "x__", "~~", "\"\<in\>\""}]}], "]"}]], "Input",
 CellChangeTimes->{{3.7397885179053755`*^9, 3.739788531731148*^9}},
 CellLabel->"In[38]:=",ExpressionUUID->"9d79f2ed-5f0f-4a7c-acef-b4424bd2fde9"],

Cell[BoxData[
 RowBox[{"{", "\<\" 6 June 1436 in Unfinden (near K&ouml;nigsberg), Lower \
Franconia (now in\"\>", "}"}]], "Output",
 CellChangeTimes->{{3.739788518503629*^9, 3.739788533234561*^9}},
 CellLabel->"Out[38]=",ExpressionUUID->"7ec3a8ae-3238-464e-8149-6b90e468f454"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"died", " ", "=", " ", 
    RowBox[{"Cases", "[", 
     RowBox[{"xml", ",", " ", 
      RowBox[{"XMLElement", "[", 
       RowBox[{"\"\<font\>\"", ",", " ", 
        RowBox[{"{", 
         RowBox[{"___", ",", " ", 
          RowBox[{"\"\<color\>\"", "\[Rule]", " ", "\"\<purple\>\""}], ",", 
          " ", "___"}], "}"}], ",", " ", "_"}], "]"}], ",", " ", "Infinity"}],
      "]"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"xmlToString", "[", "died", "]"}]}], "Input",
 CellChangeTimes->{{3.73965724665341*^9, 3.73965725213116*^9}},
 CellLabel->
  "In[231]:=",ExpressionUUID->"a52a86d4-0b28-4294-9979-e309b6db053c"],

Cell[BoxData["\<\" 6 July 1476 in Rome (now Italy)Copyright \
information\"\>"], "Output",
 CellChangeTimes->{{3.7396572478092203`*^9, 3.739657252469946*^9}},
 CellLabel->
  "Out[232]=",ExpressionUUID->"fa75a8ac-7a54-43e5-b449-7259eb24b881"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{"TemplateApply", ";"}], "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"$mapping", "=", 
    RowBox[{"Reverse", "[", 
     RowBox[{
      RowBox[{
      "Normal", "[", "Templating`HTML`PackagePrivate`$SafeHTMLEntities", 
       "]"}], ",", 
      RowBox[{"{", "2", "}"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"htmlToText", "[", "txt_String", "]"}], ":=", 
   RowBox[{"StringReplace", "[", 
    RowBox[{"txt", ",", "$mapping"}], "]"}]}], 
  "\[IndentingNewLine]"}], "\n", 
 RowBox[{"htmlToText", "[", "\"\<aaaa&agrave;\>\"", "]"}]}], "Input",
 CellChangeTimes->{3.739808752715263*^9},
 CellLabel->"In[42]:=",ExpressionUUID->"56129c9d-33f0-4ba3-a7ff-06a9bd2da53d"],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.7398087583947344`*^9, 
  3.7398087584256516`*^9}},ExpressionUUID->"1d230380-954d-44ba-a4cb-\
11aaa98785e3"]
},
WindowSize->{661, 772},
WindowMargins->{{-7, Automatic}, {Automatic, 0}},
FrontEndVersion->"11.3 for Microsoft Windows (64-bit) (March 7, 2018)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 4546, 97, 600, "Input",ExpressionUUID->"0959cc30-2488-410c-a688-65b458dcc716"],
Cell[5129, 121, 156, 2, 32, "Output",ExpressionUUID->"3fa82700-f327-41b1-9550-fcd4f74c35b4"]
}, Open  ]],
Cell[5300, 126, 1167, 26, 181, "Input",ExpressionUUID->"88008062-0753-4f8c-99d9-f88a667b0ba9"],
Cell[6470, 154, 285, 6, 28, "Input",ExpressionUUID->"a55a1da4-2c9e-4c37-9c7c-474849c5be4a"],
Cell[6758, 162, 351, 8, 86, "Input",ExpressionUUID->"1b835b82-8f11-421c-8e98-3c4b8a8bd605"],
Cell[CellGroupData[{
Cell[7134, 174, 677, 14, 67, "Input",ExpressionUUID->"dea7b73d-35fb-41f5-996a-9291a48b9f81"],
Cell[7814, 190, 1088, 25, 147, "Output",ExpressionUUID->"fc3ac9b7-952d-4dfb-8c7c-5924ab0d0d6d"]
}, Open  ]],
Cell[8917, 218, 154, 3, 28, "Input",ExpressionUUID->"995cef4d-35e2-4282-9ed1-8d055bf679c5"],
Cell[CellGroupData[{
Cell[9096, 225, 157, 2, 28, InheritFromParent,ExpressionUUID->"e89dff55-58a7-484c-9f01-d1c00dc086bc"],
Cell[9256, 229, 158, 2, 32, "Output",ExpressionUUID->"0cf635bd-42aa-4532-bead-f0c5784092a3"]
}, Open  ]],
Cell[9429, 234, 622, 14, 48, "Input",ExpressionUUID->"86169c95-2333-440a-bcd8-c60bc0a8336f"],
Cell[CellGroupData[{
Cell[10076, 252, 330, 6, 28, "Input",ExpressionUUID->"9d79f2ed-5f0f-4a7c-acef-b4424bd2fde9"],
Cell[10409, 260, 276, 4, 32, "Output",ExpressionUUID->"7ec3a8ae-3238-464e-8149-6b90e468f454"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10722, 269, 690, 16, 86, "Input",ExpressionUUID->"a52a86d4-0b28-4294-9979-e309b6db053c"],
Cell[11415, 287, 241, 4, 32, "Output",ExpressionUUID->"fa75a8ac-7a54-43e5-b449-7259eb24b881"]
}, Open  ]],
Cell[11671, 294, 762, 21, 162, "Input",ExpressionUUID->"56129c9d-33f0-4ba3-a7ff-06a9bd2da53d"],
Cell[12436, 317, 156, 3, 28, InheritFromParent,ExpressionUUID->"1d230380-954d-44ba-a4cb-11aaa98785e3"]
}
]
*)

